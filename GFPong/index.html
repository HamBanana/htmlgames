<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pong - Karate Guy vs Ninja Man</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            font-family: 'Courier New', monospace;
            color: #ffffff;
            overflow: hidden;
        }
        
        #gameContainer {
            position: relative;
            border: 3px solid #4a5568;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(74, 85, 104, 0.5);
            background: #000;
        }
        
        #gameCanvas {
            display: block;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
        }
        
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 1000;
        }
        
        .loading h1 {
            color: #4fd1c7;
            text-shadow: 0 0 10px rgba(79, 209, 199, 0.5);
            margin-bottom: 20px;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #2d3748;
            border-top: 4px solid #4fd1c7;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .controls {
            position: absolute;
            bottom: -80px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            font-size: 12px;
            color: #a0aec0;
        }
        
        .controls div {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div class="loading" id="loading">
            <h1>ü•ã PONG ü•∑</h1>
            <div>Karate Guy vs Ninja Man</div>
            <div class="spinner"></div>
            <div style="margin-top: 20px; font-size: 12px;">Initializing game...</div>
        </div>
        
        <canvas id="gameCanvas" style="display: none;"></canvas>
        
        <div class="controls">
            <div><strong>Controls:</strong></div>
            <div>Player 1 (Karate Guy): W/S keys</div>
            <div>Player 2 (Ninja Man): ‚Üë/‚Üì arrow keys</div>
            <div>Press SPACE to start/reset</div>
        </div>
    </div>

    <script>
        // Simple inline game framework to avoid loading issues
        console.log('üéÆ Starting Simple Pong Game...');

        // Game state
        let canvas, ctx;
        let gameRunning = false;
        let gameStarted = false;
        let score = { player1: 0, player2: 0 };
        
        // Game objects
        let player1, player2, ball;
        
        // Input state
        let keys = {};
        
        // Initialize game
        function initGame() {
            console.log('üéÆ Initializing game...');
            
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            
            // Set canvas size
            canvas.width = 800;
            canvas.height = 400;
            
            // Initialize game objects
            initGameObjects();
            
            // Set up input
            setupInput();
            
            // Hide loading, show canvas
            document.getElementById('loading').style.display = 'none';
            canvas.style.display = 'block';
            
            // Start game loop
            gameRunning = true;
            gameLoop();
            
            console.log('‚úÖ Game initialized successfully!');
        }
        
        function initGameObjects() {
            // Player 1 (Karate Guy) - Left paddle
            player1 = {
                x: 30,
                y: canvas.height / 2 - 50,
                width: 15,
                height: 100,
                speed: 400,
                color: '#ff6b6b',
                name: 'ü•ã Karate Guy'
            };
            
            // Player 2 (Ninja Man) - Right paddle
            player2 = {
                x: canvas.width - 45,
                y: canvas.height / 2 - 50,
                width: 15,
                height: 100,
                speed: 400,
                color: '#4ecdc4',
                name: 'ü•∑ Ninja Man'
            };
            
            // Ball
            ball = {
                x: canvas.width / 2 - 10,
                y: canvas.height / 2 - 10,
                width: 20,
                height: 20,
                vx: 0,
                vy: 0,
                speed: 300,
                color: '#ffffff',
                trail: []
            };
            
            resetBall();
        }
        
        function setupInput() {
            document.addEventListener('keydown', (e) => {
                keys[e.code] = true;
                
                // Handle game controls
                if (e.code === 'Space') {
                    e.preventDefault();
                    if (!gameStarted) {
                        startGame();
                    }
                } else if (e.code === 'KeyR') {
                    if (!gameStarted) {
                        resetGame();
                    }
                }
            });
            
            document.addEventListener('keyup', (e) => {
                keys[e.code] = false;
            });
        }
        
        function startGame() {
            gameStarted = true;
            resetBall();
            console.log('üöÄ Game started!');
        }
        
        function resetGame() {
            score.player1 = 0;
            score.player2 = 0;
            gameStarted = false;
            resetBall();
            console.log('üîÑ Game reset!');
        }
        
        function resetBall() {
            ball.x = canvas.width / 2 - 10;
            ball.y = canvas.height / 2 - 10;
            
            // Random direction
            const direction = Math.random() < 0.5 ? -1 : 1;
            ball.vx = ball.speed * direction;
            ball.vy = (Math.random() - 0.5) * ball.speed;
            ball.trail = [];
        }
        
        // Game loop
        let lastTime = 0;
        function gameLoop(currentTime) {
            if (!gameRunning) return;
            
            const deltaTime = (currentTime - lastTime) / 1000;
            lastTime = currentTime;
            
            update(deltaTime);
            render();
            
            requestAnimationFrame(gameLoop);
        }
        
        function update(deltaTime) {
            if (deltaTime > 0.1) deltaTime = 0.1; // Cap delta time
            
            updatePaddles(deltaTime);
            
            if (gameStarted) {
                updateBall(deltaTime);
            }
        }
        
        function updatePaddles(deltaTime) {
            // Player 1 controls (W/S)
            let p1Movement = 0;
            if (keys['KeyW']) p1Movement = -1;
            if (keys['KeyS']) p1Movement = 1;
            
            player1.y += p1Movement * player1.speed * deltaTime;
            player1.y = Math.max(0, Math.min(canvas.height - player1.height, player1.y));
            
            // Player 2 controls (Arrow keys)
            let p2Movement = 0;
            if (keys['ArrowUp']) p2Movement = -1;
            if (keys['ArrowDown']) p2Movement = 1;
            
            player2.y += p2Movement * player2.speed * deltaTime;
            player2.y = Math.max(0, Math.min(canvas.height - player2.height, player2.y));
        }
        
        function updateBall(deltaTime) {
            // Store trail
            ball.trail.push({ x: ball.x, y: ball.y });
            if (ball.trail.length > 8) {
                ball.trail.shift();
            }
            
            // Move ball
            ball.x += ball.vx * deltaTime;
            ball.y += ball.vy * deltaTime;
            
            // Bounce off top and bottom walls
            if (ball.y <= 0 || ball.y >= canvas.height - ball.height) {
                ball.vy = -ball.vy;
                ball.y = Math.max(0, Math.min(canvas.height - ball.height, ball.y));
            }
            
            // Check paddle collisions
            checkPaddleCollisions();
            
            // Check scoring
            checkScoring();
        }
        
        function checkPaddleCollisions() {
            // Player 1 collision
            if (ball.vx < 0 && 
                ball.x <= player1.x + player1.width &&
                ball.x + ball.width >= player1.x &&
                ball.y <= player1.y + player1.height &&
                ball.y + ball.height >= player1.y) {
                handlePaddleHit(player1);
            }
            
            // Player 2 collision
            if (ball.vx > 0 && 
                ball.x + ball.width >= player2.x &&
                ball.x <= player2.x + player2.width &&
                ball.y <= player2.y + player2.height &&
                ball.y + ball.height >= player2.y) {
                handlePaddleHit(player2);
            }
        }
        
        function handlePaddleHit(paddle) {
            // Reverse X direction
            ball.vx = -ball.vx;
            
            // Add spin based on hit position
            const paddleCenter = paddle.y + paddle.height / 2;
            const ballCenter = ball.y + ball.height / 2;
            const hitPosition = (ballCenter - paddleCenter) / (paddle.height / 2);
            
            ball.vy = hitPosition * ball.speed * 0.7;
            
            // Increase speed slightly
            ball.vx *= 1.05;
            ball.vy *= 1.05;
            
            // Keep ball outside paddle
            if (paddle === player1) {
                ball.x = paddle.x + paddle.width;
            } else {
                ball.x = paddle.x - ball.width;
            }
        }
        
        function checkScoring() {
            // Player 2 scores
            if (ball.x < -ball.width) {
                score.player2++;
                handleScore(2);
            }
            // Player 1 scores
            else if (ball.x > canvas.width) {
                score.player1++;
                handleScore(1);
            }
        }
        
        function handleScore(player) {
            console.log(`Player ${player} scores! Score: ${score.player1} - ${score.player2}`);
            
            resetBall();
            
            // Check for win
            if (score.player1 >= 5 || score.player2 >= 5) {
                gameStarted = false;
                showWinner(player);
            }
        }
        
        function showWinner(lastScorer) {
            const winner = score.player1 >= 5 ? 1 : 2;
            const winnerName = winner === 1 ? 'ü•ã Karate Guy' : 'ü•∑ Ninja Man';
            
            setTimeout(() => {
                if (confirm(`üèÜ ${winnerName} wins!\n\nFinal Score:\nKarate Guy: ${score.player1}\nNinja Man: ${score.player2}\n\nPlay again?`)) {
                    resetGame();
                }
            }, 500);
        }
        
        function render() {
            // Clear screen
            ctx.fillStyle = '#0a0a0a';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw center line
            drawCenterLine();
            
            // Draw paddles
            drawPaddle(player1);
            drawPaddle(player2);
            
            // Draw ball
            drawBall();
            
            // Draw UI
            drawUI();
        }
        
        function drawCenterLine() {
            ctx.fillStyle = '#333333';
            const lineWidth = 4;
            const x = canvas.width / 2 - lineWidth / 2;
            
            for (let y = 0; y < canvas.height; y += 20) {
                ctx.fillRect(x, y, lineWidth, 10);
            }
        }
        
        function drawPaddle(paddle) {
            // Paddle background
            ctx.fillStyle = paddle.color;
            ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);
            
            // Glow effect
            ctx.shadowColor = paddle.color;
            ctx.shadowBlur = 10;
            ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);
            ctx.shadowBlur = 0;
            
            // Player icon
            ctx.fillStyle = '#ffffff';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(
                paddle === player1 ? 'ü•ã' : 'ü•∑',
                paddle.x + paddle.width / 2,
                paddle.y + paddle.height / 2 + 6
            );
        }
        
        function drawBall() {
            // Draw trail
            ball.trail.forEach((pos, index) => {
                const alpha = (index + 1) / ball.trail.length * 0.3;
                ctx.save();
                ctx.globalAlpha = alpha;
                ctx.fillStyle = ball.color;
                ctx.fillRect(pos.x, pos.y, ball.width, ball.height);
                ctx.restore();
            });
            
            // Draw ball
            if (!gameStarted) {
                // Pulsing effect
                const pulse = Math.sin(Date.now() * 0.005) * 0.3 + 0.7;
                ctx.save();
                ctx.globalAlpha = pulse;
            }
            
            ctx.fillStyle = ball.color;
            ctx.shadowColor = ball.color;
            ctx.shadowBlur = 15;
            ctx.fillRect(ball.x, ball.y, ball.width, ball.height);
            ctx.shadowBlur = 0;
            
            if (!gameStarted) {
                ctx.restore();
            }
        }
        
        function drawUI() {
            // Score
            ctx.fillStyle = '#ffffff';
            ctx.font = 'bold 36px Arial';
            ctx.textAlign = 'center';
            
            // Player scores
            ctx.fillText(score.player1.toString(), canvas.width / 4, 50);
            ctx.fillText(score.player2.toString(), (canvas.width * 3) / 4, 50);
            
            // Player names
            ctx.font = '14px Arial';
            ctx.fillStyle = '#ff6b6b';
            ctx.fillText('ü•ã Karate Guy', canvas.width / 4, 70);
            
            ctx.fillStyle = '#4ecdc4';
            ctx.fillText('ü•∑ Ninja Man', (canvas.width * 3) / 4, 70);
            
            // Instructions
            if (!gameStarted) {
                ctx.fillStyle = '#888888';
                ctx.font = '18px Arial';
                ctx.fillText('Press SPACE to start', canvas.width / 2, canvas.height / 2 + 80);
                
                if (score.player1 > 0 || score.player2 > 0) {
                    ctx.font = '14px Arial';
                    ctx.fillText('Press R to reset score', canvas.width / 2, canvas.height / 2 + 105);
                }
            }
        }
        
        // Start the game when page loads
        window.addEventListener('load', () => {
            setTimeout(() => {
                initGame();
            }, 1000); // Small delay for loading effect
        });
        
        console.log('üìù Game script loaded, waiting for page load...');
    </script>
</body>
</html>